#======================================================================
#                    W P C _ M B D . O B J 
#                    doc: Sat Mar 22 20:06:21 2025
#                    dlm: Sat Mar 22 20:13:03 2025
#                    (c) 2025 A.M. Thurnherr
#                    uE-Info: 32 31 NIL 0 0 72 0 2 4 NIL ofnI
#======================================================================
#
>BYU=MBD_dafaRefs
; A_in = lock number
3412
B1 :_MBD_NUM_LOCKS 2505BD82B6474F3402C6053DFE :^MBD_LOCK_DATA 33CB3502
; Y_out = pointer to lock RAM data (argument for handler routine?)
8E : C6 . 
; B_out = pg of lock table
BD :X=^tableElt[ABX] BD Y=[XB] 
; U_out = lock table data (pointer)
1E233592
; RTS
#
>MBD_checkBalls_bookkeeping
; called early in Balltrough_eventDispatcher
3402
B6 :_BALLS_IN_TROUGH BB :_BALLS_LOCKED B1 :_BALLS_ACCOUNTED_FOR
; number of located balls
2303BD :
; update ball bookkeeping
3582
; RTS
#
>MBD_callHandler[AB]
; call Multiball Device handler
3476
; A_in = lock number, B_in handler argument (A_in)
BD :BYU=MBD_dafaRefs
; B := handler pg, Y := ^Lock Data, U=Lock Table Entry (pointer to 4-byte data)
3041
; X := U+1 (skip first byte)
BD :Y=[XB]_INXINX
; Y := addr of lock handler routine
BD :A=[XB]==1?
; A := PG of lock handler routine
30A4
; X := Y
1F89
; B := A
A661
; A := B_in (handler argument)
BD :longJSR[BX]
; call lock handler
35F6
; RTS

