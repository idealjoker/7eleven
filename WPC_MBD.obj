#======================================================================
#                    W P C _ M B D . O B J 
#                    doc: Sat Mar 22 20:06:21 2025
#                    dlm: Sun Mar 23 10:04:22 2025
#                    (c) 2025 A.M. Thurnherr
#                    uE-Info: 14 9 NIL 0 0 72 0 2 4 NIL ofnI
#======================================================================
#
>BYU=MBD_dataRefs[A]
;A_in = lock number
3412
B1 :_MBD_NUM_LOCKS 2505BD82B6474F3402C6053DFE :^MBD_LOCK_DATA 
;Y_out = pointer to lock RAM data (argument for handler routine?)
33CB3502 8E : 
;B_out = pg of lock table
C6 . 
BD :X=^tableElt[ABX] BD :Y=[XB] 
;U_out = lock table data (pointer)
1E23
;RTS
3592
#
>MBD_checkBalls_bookkeeping
;called early in Balltrough_eventDispatcher
3402
B6 :_BALLS_IN_TROUGH BB :_BALLS_LOCKED B1 :_BALLS_ACCOUNTED_FOR
;number of located balls
2303BD :
;update ball bookkeeping
3582
;RTS
#
>MBD_callHandler[AB]
;call Multiball Device handler; A_in = lock number, B_in handler argument (A_in)
3476
;B := handler pg, Y := ^Lock Data, U=Lock Table Entry (pointer to 4-byte data)
BD :BYU=MBD_dataRefs[A]
;X := U+1 (skip first byte)
3041
;Y := addr of lock handler routine
BD :Y=[XB]_INXINX
;A := PG of lock handler routine
BD :A=[XB]==1?
;X := Y
30A4
;B := A
1F89
;A := B_in (handler argument)
A661
;call lock handler
BD :longJSR[BX]
;RTS
35F6

